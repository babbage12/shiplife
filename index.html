<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Shiplife - An Interactive Journey</title>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@300;400;600&family=DM+Sans:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <!-- Loading screen -->
    <div class="loading" id="loading">
        <div class="loading-text">Loading globe...</div>
    </div>

    <!-- Stars background -->
    <canvas class="stars" id="stars"></canvas>

    <!-- Three.js Canvas -->
    <div id="canvas-container"></div>

    <!-- Header -->
    <div class="header">
        <div class="logo"><a href="https://derrickhudson.com" style="color: inherit; text-decoration: none;">Ship<span>life</span></a></div>
        <div class="tagline">12 Years at Sea â€¢ 60 Countries â€¢ Spanning All 7 Continents</div>
    </div>

    <!-- Centered name link at top -->
    <div class="center-name"><a href="https://derrickhudson.com"><span>Derrick</span>Hudson.com</a></div>

    <!-- Mobile Menu Toggle -->
    <button class="menu-toggle" id="menuToggle" onclick="toggleMobileMenu()">
        <span></span>
        <span></span>
        <span></span>
    </button>

    <!-- Mobile Overlay -->
    <div class="mobile-overlay" id="mobileOverlay" onclick="toggleMobileMenu()"></div>

    <!-- Location List -->
    <div class="location-list" id="locationList"></div>

    <!-- Sidebar Scroll Hint -->
    <div class="sidebar-scroll-hint" id="sidebarScrollHint">
        <span class="scroll-arrow">â†“</span>
        <span>Scroll for more locations</span>
    </div>

    <!-- Copyright below left panel -->
    <div class="left-copyright">Â© Derrick Hudson. All rights reserved.</div>

    <!-- Tooltip -->
    <div class="tooltip" id="tooltip">
        <div class="tooltip-tag" id="tooltipTag"></div>
        <div class="tooltip-title" id="tooltipTitle"></div>
        <div class="tooltip-desc" id="tooltipDesc"></div>
    </div>

    <!-- Side Panel -->
    <div class="side-panel" id="sidePanel">
        <button class="panel-close" onclick="closePanel()">Ã—</button>

        <!-- Three Doors Navigation -->
        <div class="three-doors-nav" id="threeDoorsNav">
            <div class="door-nav-item">
                <span class="door-nav-label" id="doorLabel1"></span>
                <button class="door-nav-btn" data-door="1" onclick="goToDoor(1)" title="Door #1: Escape">
                    ðŸšª
                    <span class="door-number">1</span>
                </button>
            </div>
            <div class="door-nav-item">
                <span class="door-nav-label" id="doorLabel2"></span>
                <button class="door-nav-btn" data-door="2" onclick="goToDoor(2)" title="Door #2: First Contract">
                    ðŸšª
                    <span class="door-number">2</span>
                </button>
            </div>
            <div class="door-nav-item">
                <span class="door-nav-label" id="doorLabel3"></span>
                <button class="door-nav-btn" data-door="3" onclick="goToDoor(3)" title="Door #3: Full Circle">
                    ðŸšª
                    <span class="door-number">3</span>
                </button>
            </div>
        </div>

        <div class="panel-image-container">
            <img class="panel-image" id="panelImage" src="" alt="">
            <div class="panel-image-caption" id="panelImageCaption"></div>
        </div>
        <div class="panel-content">
            <div class="panel-tag" id="panelTag"></div>
            <h2 class="panel-title" id="panelTitle"></h2>
            <div class="panel-preview" id="panelPreview"></div>
            <div class="panel-text" id="panelText"></div>
            <div class="swipe-hint">â†‘ Swipe up for full story</div>
            <div class="next-door-hint" id="nextDoorHint" onclick="goToNextDoor()">
                <span class="door-icon">ðŸšª</span>
                <span class="door-text" id="nextDoorText">Continue to Door #2</span>
            </div>
            <div class="locations-hint" onclick="viewAllLocations()">
                <span class="hint-arrow">â†“</span>
                <span class="hint-text">View All Locations</span>
                <span class="hint-count" id="locationsCount">24 places</span>
            </div>
            <a class="back-to-globe" onclick="closePanel()">back to globe</a>
            <div class="copyright">Â© Derrick Hudson. All rights reserved.</div>
        </div>
    </div>

    <!-- Scroll hint at bottom (outside panel for fixed positioning) -->
    <div class="scroll-hint-bottom" id="scrollHintBottom">
        <div class="scroll-hint-bottom-inner">
            <span class="scroll-arrow">â†“</span>
            <span>Scroll to read</span>
        </div>
    </div>

    <!-- Instructions -->
    <div class="instructions">
        <p class="desktop-instructions">Drag to rotate â€¢ Scroll to zoom â€¢ Click a location to explore</p>
        <p class="mobile-instructions">Drag to rotate â€¢ Pinch to zoom â€¢ Tap a location to explore</p>
    </div>

    <!-- Mobile Tap Hint (points to Toledo door) -->
    <div class="mobile-tap-hint" id="mobileTapHint">
        <span class="tap-arrow">â†‘</span>
        <span class="tap-text">Click to begin</span>
    </div>

    <!-- Background Music for Story Panels -->
    <audio id="backgroundMusic" preload="none"></audio>

    <!-- Lightbox for full-size images -->
    <div class="lightbox" id="lightbox" onclick="closeLightbox(event)">
        <span class="lightbox-close">&times;</span>
        <img src="" alt="Full size image" id="lightboxImage">
        <div class="lightbox-caption" id="lightboxCaption"></div>
    </div>

    <!-- Debug Panel (for mobile testing) -->
    <div id="debugPanel" style="
        position: fixed;
        bottom: 60px;
        left: 10px;
        right: 10px;
        max-height: 150px;
        background: rgba(0,0,0,0.9);
        color: #0f0;
        font-family: monospace;
        font-size: 11px;
        padding: 8px;
        border-radius: 8px;
        z-index: 99999;
        overflow-y: auto;
        display: block;
    ">
        <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
            <strong style="color: #fff;">DEBUG LOG</strong>
            <div>
                <button onclick="clearProgress()" style="background:#c00;color:#fff;border:none;padding:3px 8px;border-radius:4px;margin-right:5px;font-size:10px;">Clear Progress</button>
                <button onclick="document.getElementById('debugPanel').style.display='none'" style="background:#333;color:#fff;border:none;padding:3px 8px;border-radius:4px;font-size:10px;">Hide</button>
            </div>
        </div>
        <div id="debugLog">Waiting for actions...</div>
    </div>

    <!-- Intro Modal for First-Time Visitors -->
    <div class="intro-modal-overlay" id="introModal">
        <div class="intro-modal">
            <h2>Welcome to 12 Years at Sea</h2>
            <p class="intro-text">This globe holds over 120 ports of call from my life as a cruise ship musician.</p>
            <p class="intro-text">But first, let me show you how it all began...</p>
            <div class="intro-doors">
                <div class="intro-door" data-door="1">
                    <img class="intro-door-img" src="https://res.cloudinary.com/de5jbyhxx/image/upload/w_120,q_80,f_auto/v1769977828/ComfyUI_00864__s9njoz.png" alt="Door 1">
                    <span class="intro-door-label">Door #1</span>
                    <span class="intro-door-title">Escape</span>
                </div>
                <div class="intro-door" data-door="2">
                    <img class="intro-door-img" src="https://res.cloudinary.com/de5jbyhxx/image/upload/w_120,q_80,f_auto/v1769977819/ComfyUI_00873__yfqqdw.png" alt="Door 2">
                    <span class="intro-door-label">Door #2</span>
                    <span class="intro-door-title">The Path</span>
                </div>
                <div class="intro-door" data-door="3">
                    <img class="intro-door-img" src="https://res.cloudinary.com/de5jbyhxx/image/upload/w_120,q_80,f_auto/v1769977815/ComfyUI_00896__zn6bdc.png" alt="Door 3">
                    <span class="intro-door-label">Door #3</span>
                    <span class="intro-door-title">Full Circle</span>
                </div>
            </div>
            <p class="intro-instruction">Click the bouncing icon above to begin</p>
        </div>
    </div>

    <!-- Director's Commentary Modal -->
    <div class="commentary-modal-overlay" id="commentaryModal" onclick="closeCommentaryModal(event)">
        <div class="commentary-modal" onclick="event.stopPropagation()">
            <div class="commentary-header">
                <span class="commentary-icon">ðŸŽ¬</span>
                <span class="commentary-label">Director's Commentary</span>
            </div>
            <h4 class="commentary-title">How to Make an Impression</h4>
            <p>The assistant cruise director gave me the grand tour and dropped me at my cabin. I flipped through my folder full of welcome papers - induction schedules, safety protocols, crew mess hours. <em>I hope I can find my way back to...</em> where was it again?</p>
            <p>"You'll be fine. See you at 14:30 for Induction 1."</p>
            <p>The door clicked shut. I wanted to call home. Tell everyone I'd made it. The phone on the wall looked simple enough.</p>
            <p><span class="story-emphasis">Here's what I understood about ship communication systems:</span> nothing.</p>
            <p><span class="story-emphasis">Here's what I understood about maritime hierarchy and protocol:</span> less than nothing.</p>
            <p>Let me paint you a picture of embarkation day on a cruise ship. Two thousand passengers are boarding. Luggage is being sorted and delivered to 800+ cabins. The kitchen is prepping for the first seating. Safety officers are running equipment checks. The entertainment staff is rehearsing the welcome show.</p>
            <p>And on the bridge - the nerve center of the entire operation - the Captain is coordinating with harbor pilots, monitoring weather reports, clearing departure procedures, and managing a crew of over 600 people.</p>
            <p>This is where I come in.</p>
            <p>So when the phone wouldn't connect, I did what any reasonable person would do. I started mashing zeros like I was trying to win a prize.</p>
            <p class="zeros">Nothing.</p>
            <p class="zeros">Zero zero zero.</p>
            <p class="zeros">Still nothing.</p>
            <p class="zeros"><em>Zero zero zero zero zero-</em></p>
            <span class="captain-voice">"Bridge. Captain speaking."</span>
            <p>I froze.</p>
            <span class="captain-voice">"...Hello?"</span>
            <p>I hung up.</p>
            <span class="rule-one">Rule #1: Do not call the bridge. Ever. Unless someone is actively dying - and even then, there's a chain of command for that.</span>
            <p class="kicker">I had been aboard for approximately forty-five minutes. But for one beautiful, horrifying moment, I was the guy who made the Captain answer the phone to help the new musician call his mom.</p>
        </div>
    </div>

    <!-- External Libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

    <!-- Data (must load first) -->
    <script src="js/data/config.js"></script>
    <script src="js/data/galleries.js"></script>
    <script src="js/data/locations.js"></script>

    <!-- Utilities -->
    <script src="js/utils.js"></script>

    <!-- Globe -->
    <script src="js/globe/core.js"></script>
    <script src="js/globe/markers.js"></script>
    <script src="js/globe/animation.js"></script>

    <!-- UI -->
    <script src="js/ui/tooltip.js"></script>
    <script src="js/ui/panel.js"></script>
    <script src="js/ui/sidebar.js"></script>
    <script src="js/ui/lightbox.js"></script>
    <script src="js/ui/carousel.js"></script>
    <script src="js/ui/modal.js"></script>

    <!-- Input & Audio -->
    <script src="js/audio.js"></script>
    <script src="js/input.js"></script>

    <!-- Main Initialization -->
    <script src="js/main.js"></script>

</body>
</html>
